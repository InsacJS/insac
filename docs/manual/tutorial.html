<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Manual | Insac Framework</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Framework de creaci&#xF3;n de servicios web"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="Insac Framework"><meta property="twitter:description" content="Framework de creaci&#xF3;n de servicios web"></head>
<body class="layout-container manual-root" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/waquispe/insac"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/overview.html"><a href="manual/overview.html" data-ice="link">Vista general</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/installation.html"><a href="manual/installation.html" data-ice="link">Instalaci&#xF3;n</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/tutorial.html"><a href="manual/tutorial.html" data-ice="link">Ejemplo pr&#xE1;ctico</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown" data-ice="content"><h1 id="ejemplo-pr&#xE1;ctico">Ejemplo pr&#xE1;ctico</h1><p>Archivo <code>app.js</code></p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const { Insac } = require(&apos;insac&apos;)

let app = new Insac()

// Definici&#xF3;n de modelos.
app.addModel(&apos;usuario&apos;)
app.addModel(&apos;persona&apos;)

// M&#xED;dleware Global (Para todas las rutas que comiencen con &apos;/api&apos;).
app.addMiddleware(&apos;/api&apos;, (req, res, next) =&gt; {
  req.info = `Middleware global`
  next()
})

// Middleware Local (Para una ruta en espec&#xED;fico).
app.addMiddleware(&apos;auth&apos;, (req, res, next) =&gt; {
  req.user = &apos;JHON SMITH&apos;
  next()
})

// Adiciona un middleware a una ruta.
app.addMiddleware(&apos;/api/admin&apos;, &apos;auth&apos;)

// Rutas por defecto del modelo persona, incluye a los modelos con los que est&#xE9; relacionado.
insac.addRoute(&apos;persona&apos;)

// Ruta personalizada.
insac.addRoute(&apos;GET&apos;, &apos;/api/admin/custom&apos;, {
  controller: (req, res, next) =&gt; {
    let data = {
      msg: `Bienvenido ${req.user}`,
      info: req.info
    }
    res.success200(data)
  }
})

// Crea las tablas de los modelos
app.migrate().then(result =&gt; {
  // Inicia la aplicaci&#xF3;n
  app.listen()
})

module.exports = app</code>
</code></pre>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.0.1)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
